<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Discretization · RobotDynamics</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">RobotDynamics</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="models.html">1. Setting up a Dynamics Model</a></li><li><a class="tocitem" href="dynamics_evaluation.html">2. Evaluating the Dynamics</a></li></ul></li><li><span class="tocitem">Documentation</span><ul><li class="is-active"><a class="tocitem" href="discretization.html">Discretization</a><ul class="internal"><li><a class="tocitem" href="#Model-Discretization-1"><span>Model Discretization</span></a></li><li><a class="tocitem" href="#Integration-Schemes-1"><span>Integration Schemes</span></a></li><li><a class="tocitem" href="#Defining-a-New-Integration-Scheme-1"><span>Defining a New Integration Scheme</span></a></li></ul></li><li><a class="tocitem" href="knotpoints.html"><code>KnotPoint</code> type</a></li><li><a class="tocitem" href="liemodel.html">Models with Rotations</a></li><li><a class="tocitem" href="rigidbody.html">Rigid Bodies</a></li><li><a class="tocitem" href="linearmodel.html">Linear Models</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Documentation</a></li><li class="is-active"><a href="discretization.html">Discretization</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="discretization.html">Discretization</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/master/docs/src/discretization.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Discretization-1"><a class="docs-heading-anchor" href="#Discretization-1">Discretization</a><a class="docs-heading-anchor-permalink" href="#Discretization-1" title="Permalink"></a></h1><p>This page gives details on the methods for evaluating discretized dynamics, as well as instructions on how to define a custom integration method.</p><h2 id="Model-Discretization-1"><a class="docs-heading-anchor" href="#Model-Discretization-1">Model Discretization</a><a class="docs-heading-anchor-permalink" href="#Model-Discretization-1" title="Permalink"></a></h2><p>With a model defined, we can compute the discrete dynamics and discrete dynamics Jacobians for an Implicit integration rule with the following methods</p><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.discrete_dynamics" href="#RobotDynamics.discrete_dynamics"><code>RobotDynamics.discrete_dynamics</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Compute the discretized dynamics of <code>model</code> using explicit integration scheme <code>Q&lt;:QuadratureRule</code>.</p><p>Methods:</p><pre><code class="language-none">x′ = discrete_dynamics(model, model, z)  # uses RK3 as the default integration scheme
x′ = discrete_dynamics(Q, model, x, u, t, dt)
x′ = discrete_dynamics(Q, model, z::KnotPoint)</code></pre><p>The default integration scheme is stored in <code>TrajectoryOptimization.DEFAULT_Q</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L174-L185">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.discrete_jacobian!" href="#RobotDynamics.discrete_jacobian!"><code>RobotDynamics.discrete_jacobian!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">∇f = discrete_jacobian!(Q, ∇f, model, z::AbstractKnotPoint)</code></pre><p>Compute the <code>n × (n+m)</code> discrete dynamics Jacobian <code>∇f</code> of <code>model</code> using explicit integration scheme <code>Q&lt;:QuadratureRule</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L205-L210">source</a></section></article><h2 id="Integration-Schemes-1"><a class="docs-heading-anchor" href="#Integration-Schemes-1">Integration Schemes</a><a class="docs-heading-anchor-permalink" href="#Integration-Schemes-1" title="Permalink"></a></h2><p>RobotDynamics.jl has already defined a handful of integration schemes for computing discrete dynamics. The integration schemes are specified as abstract types, so that methods can efficiently dispatch based on the integration scheme selected. Here is the current set of implemented types:</p><ul><li><a href="discretization.html#RobotDynamics.QuadratureRule"><code>QuadratureRule</code></a><ul><li><a href="discretization.html#RobotDynamics.Explicit"><code>Explicit</code></a><ul><li><a href="discretization.html#RobotDynamics.RK2"><code>RK2</code></a></li><li><a href="discretization.html#RobotDynamics.RK3"><code>RK3</code></a></li><li><a href="discretization.html#RobotDynamics.RK4"><code>RK4</code></a></li><li><a href="discretization.html#RobotDynamics.Exponential"><code>Exponential</code></a></li><li><a href="discretization.html#RobotDynamics.PassThrough"><code>PassThrough</code></a></li></ul></li><li><a href="discretization.html#RobotDynamics.Implicit"><code>Implicit</code></a><ul><li><a href="discretization.html#RobotDynamics.HermiteSimpson"><code>HermiteSimpson</code></a></li></ul></li></ul></li></ul><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.QuadratureRule" href="#RobotDynamics.QuadratureRule"><code>RobotDynamics.QuadratureRule</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Integration rule for approximating the continuous integrals for the equations of motion</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L72">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.Explicit" href="#RobotDynamics.Explicit"><code>RobotDynamics.Explicit</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Integration rules of the form x′ = f(x,u), where x′ is the next state</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L78">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.RK2" href="#RobotDynamics.RK2"><code>RobotDynamics.RK2</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Second-order Runge-Kutta method with zero-order-old on the controls (i.e. midpoint)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L90">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.RK3" href="#RobotDynamics.RK3"><code>RobotDynamics.RK3</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Second-order Runge-Kutta method with zero-order-old on the controls</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L87">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.RK4" href="#RobotDynamics.RK4"><code>RobotDynamics.RK4</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Fourth-order Runge-Kutta method with zero-order-old on the controls</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L84">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.Exponential" href="#RobotDynamics.Exponential"><code>RobotDynamics.Exponential</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Exponential integration for linear systems with ZOH on controls.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/linearmodel.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.PassThrough" href="#RobotDynamics.PassThrough"><code>RobotDynamics.PassThrough</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Integration type for systems with user defined discrete dynamics.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/linearmodel.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.Implicit" href="#RobotDynamics.Implicit"><code>RobotDynamics.Implicit</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Integration rules of the form x′ = f(x,u,x′,u′), where x′,u′ are the states and controls at the next time step.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RobotDynamics.HermiteSimpson" href="#RobotDynamics.HermiteSimpson"><code>RobotDynamics.HermiteSimpson</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Third-order Runge-Kutta method with first-order-hold on the controls</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RoboticExplorationLab/RobotDynamics.jl/blob/a4b631a303ec6a9e96cd9a6d1a6112e10e973b10/src/model.jl#L95">source</a></section></article><h2 id="Defining-a-New-Integration-Scheme-1"><a class="docs-heading-anchor" href="#Defining-a-New-Integration-Scheme-1">Defining a New Integration Scheme</a><a class="docs-heading-anchor-permalink" href="#Defining-a-New-Integration-Scheme-1" title="Permalink"></a></h2><h3 id="Explicit-Methods-1"><a class="docs-heading-anchor" href="#Explicit-Methods-1">Explicit Methods</a><a class="docs-heading-anchor-permalink" href="#Explicit-Methods-1" title="Permalink"></a></h3><p>Explicit integration schemes are understandably simpler, since the output is not a function of itself, as is the case with implict schemes. As such, as a minimum, the user only needs to define the following method for a new rule <code>MyQ</code>:</p><pre><code class="language-julia">abstract type MyQ &lt;: RobotDynamics.Explicit end
x′ = discrete_dynamics(::Type{MyQ}, model::AbstractModel, x, u, t, dt)</code></pre><p>which will make calls to the continuous-time dynamics function <code>dynamics(model, x, u, t)</code>.</p><p>Below is an example of the default integration method <a href="discretization.html#RobotDynamics.RK3"><code>RK3</code></a>, a third-order Runge-Kutta method:</p><pre><code class="language-julia">function discrete_dynamics(::Type{RK3}, model::AbstractModel,
		x::StaticVector, u::StaticVector, t, dt)
    k1 = dynamics(model, x,             u, t       )*dt;
    k2 = dynamics(model, x + k1/2,      u, t + dt/2)*dt;
    k3 = dynamics(model, x - k1 + 2*k2, u, t + dt  )*dt;
    x + (k1 + 4*k2 + k3)/6
end</code></pre><h3 id="Implicit-Methods-(experimental)-1"><a class="docs-heading-anchor" href="#Implicit-Methods-(experimental)-1">Implicit Methods (experimental)</a><a class="docs-heading-anchor-permalink" href="#Implicit-Methods-(experimental)-1" title="Permalink"></a></h3><p>Incorporating implicit integration methods is still under development (great option for     someone looking to contribute!).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="dynamics_evaluation.html">« 2. Evaluating the Dynamics</a><a class="docs-footer-nextpage" href="knotpoints.html"><code>KnotPoint</code> type »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 15 October 2020 10:43">Thursday 15 October 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
